function ownKeys(t,e){var n,i=Object.keys(t);return Object.getOwnPropertySymbols&&(n=Object.getOwnPropertySymbols(t),e&&(n=n.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,n)),i}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(n),!0).forEach(function(e){_defineProperty(t,e,n[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))})}return t}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,_toPropertyKey(i.key),i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperty(e,t,n){return(t=_toPropertyKey(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toPropertyKey(e){e=_toPrimitive(e,"string");return"symbol"==_typeof(e)?e:e+""}function _toPrimitive(e,t){if("object"!=_typeof(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0===n)return("string"===t?String:Number)(e);n=n.call(e,t||"default");if("object"!=_typeof(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}var CustomMraid=_createClass(function e(){var t;_classCallCheck(this,e),_defineProperty(this,"_parseResult",function(e){if(void 0!==e)return"string"!=typeof e?e:/\d/g.test(e)?Number(e):"true"===e||"false"===e?"true"===e:e}),_defineProperty(this,"_getJsonValue",function(t){try{var n=JSON.parse(t),e=this._parseResult(n.result);return console.log("处理后的返回值(json)： ",e,_typeof(e)),e}catch(e){n=this._parseResult(t);return console.log("处理后的返回值(其他类型)： ",n,_typeof(n)),n}}),_defineProperty(this,"getVersion",function(){return this._version}),_defineProperty(this,"_iosPostMessage",function(e){var t=e.eventName,e=e.params,e="open"===t?{action:"open",url:e}:_objectSpread({action:"event",eventName:t},void 0!==_typeof(e)?e:null);if(-1<["getState","isViewable","supports","getPlacementType","getOrientationProperties","getCurrentAppOrientation","getCurrentPosition","getDefaultPosition","getExpandProperties","getMaxSize","getScreenSize","getResizeProperties","getLocation"].indexOf(t))return t=window.prompt(JSON.stringify(e)),this._getJsonValue(t);this.mraidHandler.postMessage(e)}),_defineProperty(this,"_androidPostMessage",function(e){var t,n=e.eventName,e=e.params;return"open"===n?(t=window.mraidJsBridge.open(e),this._getJsonValue(t)):"object"===_typeof(t=window.mraidJsBridge.event(n,e))?null==t?void 0:t.result:t}),_defineProperty(this,"_nativePostMessage",function(e){return console.log("mraid.call function of ".concat(null==e?void 0:e.eventName),e),this.isIOS?this._iosPostMessage(e):this.isAndroid?this._androidPostMessage(e):void 0}),_defineProperty(this,"getState",function(){return this._nativePostMessage({eventName:"getState"})}),_defineProperty(this,"close",function(){this._nativePostMessage({eventName:"close"})}),_defineProperty(this,"useCustomClose",function(e){this._nativePostMessage({eventName:"useCustomClose",params:e})}),_defineProperty(this,"unload",function(){this._nativePostMessage({eventName:"unload"})}),_defineProperty(this,"expand",function(e){this._nativePostMessage(_objectSpread({eventName:"expand"},void 0!==_typeof(e)?{params:e}:null))}),_defineProperty(this,"isViewable",function(){return this._nativePostMessage({eventName:"isViewable"})}),_defineProperty(this,"playVideo",function(e){this._nativePostMessage({eventName:"playVideo",params:e})}),_defineProperty(this,"resize",function(){this._nativePostMessage({eventName:"resize"})}),_defineProperty(this,"storePicture",function(e){this._nativePostMessage({eventName:"storePicture",params:e})}),_defineProperty(this,"createCalendarEvent",function(e){this._nativePostMessage({eventName:"createCalendarEvent",params:e})}),_defineProperty(this,"initVpaid",function(e){this._nativePostMessage({eventName:"initVpaid",params:e})}),_defineProperty(this,"supports",function(e){var t=["sms","tel","calendar","storePicture","inlineVideo","vpaid","location"];return!!t.includes(t)&&this._nativePostMessage({eventName:"supports",params:e})}),_defineProperty(this,"getPlacementType",function(){return this._nativePostMessage({eventName:"getPlacementType"})}),_defineProperty(this,"setOrientationProperties",function(e){this._nativePostMessage({eventName:"setOrientationProperties",params:e})}),_defineProperty(this,"getOrientationProperties",function(){return this._nativePostMessage({eventName:"getOrientationProperties"})}),_defineProperty(this,"getCurrentAppOrientation",function(){return this._nativePostMessage({eventName:"getCurrentAppOrientation"})}),_defineProperty(this,"getCurrentPosition",function(){return this._nativePostMessage({eventName:"getCurrentPosition"})}),_defineProperty(this,"getDefaultPosition",function(){return this._nativePostMessage({eventName:"getDefaultPosition"})}),_defineProperty(this,"setExpandProperties",function(e){this._nativePostMessage({eventName:"setExpandProperties",params:e})}),_defineProperty(this,"getExpandProperties",function(){return this._nativePostMessage({eventName:"getExpandProperties"})}),_defineProperty(this,"getMaxSize",function(){return this._nativePostMessage({eventName:"getMaxSize"})}),_defineProperty(this,"getScreenSize",function(){return this._nativePostMessage({eventName:"getScreenSize"})}),_defineProperty(this,"getResizeProperties",function(){return this._nativePostMessage({eventName:"getResizeProperties"})}),_defineProperty(this,"setResizeProperties",function(e){this._nativePostMessage({eventName:"setResizeProperties",params:e})}),_defineProperty(this,"getLocation",function(){return this._nativePostMessage({eventName:"getLocation"})}),_defineProperty(this,"open",function(e){this._nativePostMessage({eventName:"open",params:e})}),_defineProperty(this,"gameReady",function(){this._nativePostMessage({eventName:"gameReady"})}),_defineProperty(this,"gameEnd",function(){this._nativePostMessage({eventName:"gameEnd"})}),_defineProperty(this,"gameStart",function(){this._nativePostMessage({eventName:"gameStart"})}),_defineProperty(this,"_parseEventParams",function(t){try{return JSON.parse(t)}catch(e){return t?(Array.isArray(t),t):[]}}),_defineProperty(this,"emit",function(e,t){var n=this._parseEventParams(t),t=(console.log("emit触发了事件, eventName: ".concat(e,", 参数: "),t,"解析后的参数：",n),this._events[e]);Array.isArray(t)&&0<t.length&&t.forEach(function(e){e.apply(this,Array.isArray(n)?n:[n])})}),_defineProperty(this,"addEventListener",function(e,t){var n=Array.isArray(this._events[e])?this._events[e]:[];n.push(t),this._events[e]=n}),_defineProperty(this,"removeEventListener",function(e,t){var n,i=this._events[e];Array.isArray(i)&&(n=i.findIndex(function(e){return e===t}),t&&-1<n?i.splice(n,1):this._events[e]=[])}),_defineProperty(this,"removeListener",this.removeEventListener),this._version="3.0",this._events={},this.isIOS=void 0!==(null==(t=window.webkit)||null==(t=t.messageHandlers)||null==(t=t.mraidHandler)?void 0:t.postMessage),this.isAndroid=void 0!==window.mraidJsBridge,this.mraidHandler=null==(t=window.webkit)||null==(t=t.messageHandlers)?void 0:t.mraidHandler,console.log("mraid inited")}),mraid=window.mraid=new CustomMraid;
